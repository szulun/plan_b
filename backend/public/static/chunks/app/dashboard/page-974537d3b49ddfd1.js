(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{2318:(e,t,s)=>{Promise.resolve().then(s.bind(s,7986))},2943:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(3365),r=s(7020),l=s(6700),n=s(2196);function i(e){let{isOpen:t,onClose:s,title:i,children:o}=e;return(0,a.jsx)(r.N,{children:t&&(0,a.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:s,children:(0,a.jsxs)(l.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full p-6",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:i}),(0,a.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,a.jsx)(n.A,{className:"w-5 h-5 text-gray-600"})})]}),o]})})})}s(1521)},6276:(e,t,s)=>{"use strict";s.d(t,{j:()=>n});var a=s(3039),r=s(7560);let l=(0,a.Dk)().length?(0,a.Dk)()[0]:(0,a.Wp)({apiKey:"AIzaSyDUDnF2IE0l_en82H7u2AcaMaH2lSNpcpw",authDomain:"plan-b-ad459.firebaseapp.com",projectId:"plan-b-ad459",storageBucket:"plan-b-ad459.appspot.com",messagingSenderId:"554173840942",appId:"1:554173840942:web:123656f183f10d504669bf",measurementId:"G-WQ836Y7MJ8"}),n=(0,r.xI)(l)},7986:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>U});var a=s(3365),r=s(1521),l=s(627),n=s(6276),i=s(7560),o=s(6700);function c(e){let{children:t}=e;return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:(0,a.jsx)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"container mx-auto px-4 py-2",children:t})})}var d=s(1401);function m(){return(0,a.jsx)(o.P.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mt-2 mb-0",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.P.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"p-2 bg-gradient-to-br from-pink-200 via-purple-200 to-pink-300 rounded-xl",children:(0,a.jsx)(d.A,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-green-400 to-blue-500 rounded-full animate-pulse shadow-lg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-5xl font-black tracking-tight mb-2 text-left font-heading",style:{fontFamily:"var(--font-sacramento), cursive",letterSpacing:"2px",color:"#222",lineHeight:1},children:"Plan B"}),(0,a.jsx)("p",{className:"text-gray-600 text-xl font-montserrat-alt tracking-wide text-left",children:"Portfolio Manager"})]})]})})})}var x=s(2943),u=s(6296),h=s(3060);function g(e){let{onAdd:t,onClose:s}=e,[l,n]=(0,r.useState)(""),[i,c]=(0,r.useState)([]),[d,m]=(0,r.useState)(null),[x,g]=(0,r.useState)({quantity:"",purchasePrice:"",purchaseDate:new Date().toISOString().split("T")[0],targetPrice:"",notes:"",buyReason:""}),p=async()=>{l.trim()&&c([{symbol:"AAPL",name:"Apple Inc."},{symbol:"GOOGL",name:"Alphabet Inc."},{symbol:"MSFT",name:"Microsoft Corporation"},{symbol:"TSLA",name:"Tesla Inc."},{symbol:"AMZN",name:"Amazon.com Inc."}].filter(e=>e.symbol.toLowerCase().includes(l.toLowerCase())||e.name.toLowerCase().includes(l.toLowerCase())))};return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d&&x.buyReason.trim()&&(t({id:Date.now().toString(),symbol:d.symbol,name:d.name,quantity:parseInt(x.quantity),purchasePrice:parseFloat(x.purchasePrice),purchaseDate:new Date(x.purchaseDate),targetPrice:x.targetPrice?parseFloat(x.targetPrice):void 0,notes:x.notes,buyReason:x.buyReason,currentPrice:parseFloat(x.purchasePrice),lastUpdated:new Date}),s())},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Search Stock"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:l,onChange:e=>n(e.target.value),placeholder:"Enter stock symbol or company name",className:"flex-1 px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),(0,a.jsx)("button",{type:"button",onClick:p,className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:(0,a.jsx)(u.A,{className:"w-4 h-4"})})]}),i.length>0&&(0,a.jsx)("div",{className:"space-y-1 mt-2",children:i.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>m(e),className:"w-full p-2 text-left rounded-lg border transition-colors text-xs ".concat((null==d?void 0:d.symbol)===e.symbol?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:e.symbol}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:e.name})]},e.symbol))})]}),(0,a.jsx)("hr",{className:"my-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-bold text-gray-700 mb-1",children:"Basic Info"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Quantity"}),(0,a.jsx)("input",{type:"number",value:x.quantity,onChange:e=>g({...x,quantity:e.target.value}),placeholder:"10",className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Purchase Price"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:x.purchasePrice,onChange:e=>g({...x,purchasePrice:e.target.value}),placeholder:"150.00",className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Purchase Date"}),(0,a.jsx)("input",{type:"date",value:x.purchaseDate,onChange:e=>g({...x,purchaseDate:e.target.value}),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0})]})]})]}),(0,a.jsx)("hr",{className:"my-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-bold text-gray-700 mb-1",children:"Advanced (Optional)"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Target Price"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:x.targetPrice,onChange:e=>g({...x,targetPrice:e.target.value}),placeholder:"180.00",className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Buy Reason"}),(0,a.jsx)("input",{type:"text",value:x.buyReason,onChange:e=>g({...x,buyReason:e.target.value}),placeholder:"Why did you buy this stock?",className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",required:!0})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1",children:"Notes"}),(0,a.jsx)("textarea",{value:x.notes,onChange:e=>g({...x,notes:e.target.value}),placeholder:"Additional notes...",rows:2,className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})]})]}),d&&(0,a.jsxs)(o.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-2 bg-gray-50 rounded-lg mt-2 text-xs",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900 mb-1",children:"Selected Stock"}),(0,a.jsxs)("div",{className:"text-gray-600",children:[(0,a.jsx)("span",{className:"font-bold",children:"Symbol:"})," ",d.symbol," \xa0|",(0,a.jsx)("span",{className:"font-bold ml-2",children:"Name:"})," ",d.name]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"px-4 py-1.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",className:"px-4 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm flex items-center gap-1",disabled:!d||!x.quantity||!x.purchasePrice,children:[(0,a.jsx)(h.A,{className:"w-4 h-4"}),"Add"]})]})]})}var p=s(8197),b=s(1514);function f(e){let{holdings:t}=e,{stockAssets:s,cashValue:r,cashPercentage:l,totalValue:n}=(()=>{let e=t.filter(e=>"CASH"!==e.symbol).map(e=>{var t;let s=(null!=(t=e.currentPrice)?t:e.purchasePrice)*e.quantity;return{label:e.symbol,value:s,name:e.name}}),s=t.find(e=>"CASH"===e.symbol),a=s?s.purchasePrice:0,r=e.reduce((e,t)=>e+t.value,0)+a;return{stockAssets:e.map(e=>({...e,percentage:r>0?e.value/r*100:0})),cashValue:a,cashPercentage:r>0?a/r*100:0,totalValue:r}})(),i={labels:[...s.map(e=>"".concat(e.label," (").concat(e.percentage.toFixed(1),"%)")),...r>0?["Cash (".concat(l.toFixed(1),"%)")]:[]],datasets:[{data:[...s.map(e=>e.value),...r>0?[r]:[]],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#FF6384","#36A2EB","#FFCE56","#4BC0C0"],borderWidth:2,borderColor:"#ffffff"}]};return 0===n?(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Portfolio Asset Allocation"}),(0,a.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCA"}),(0,a.jsx)("div",{children:"No assets to display"}),(0,a.jsx)("div",{className:"text-sm",children:"Add stocks or cash to see your allocation"})]})})]}):(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Portfolio Asset Allocation"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Total Portfolio Value: $",n.toLocaleString(void 0,{maximumFractionDigits:2})]})]}),(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(p.Fq,{data:i,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,font:{size:12}}},title:{display:!0,text:"Portfolio Asset Allocation",font:{size:16,weight:"bold"},padding:{top:10,bottom:20}},tooltip:{callbacks:{label:function(e){let t=e.label||"",s=e.parsed,a=(s/n*100).toFixed(1);return"".concat(t,": $").concat(s.toLocaleString(void 0,{maximumFractionDigits:2})," (").concat(a,"%)")}}}}}})}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Asset Details"}),(0,a.jsxs)("div",{className:"space-y-2",children:[s.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:i.datasets[0].backgroundColor[t]}}),(0,a.jsx)("span",{className:"font-medium",children:e.label}),(0,a.jsxs)("span",{className:"text-gray-500 ml-1",children:["(",e.name,")"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-medium",children:["$",e.value.toLocaleString(void 0,{maximumFractionDigits:2})]}),(0,a.jsxs)("div",{className:"text-gray-500",children:[e.percentage.toFixed(1),"%"]})]})]},e.label+"-"+t)),r>0&&(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:i.datasets[0].backgroundColor[s.length]}}),(0,a.jsx)("span",{className:"font-medium",children:"Cash"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-medium",children:["$",r.toLocaleString(void 0,{maximumFractionDigits:2})]}),(0,a.jsxs)("div",{className:"text-gray-500",children:[l.toFixed(1),"%"]})]})]})]})]})]})}b.t1.register(b.Bs,b.m_,b.s$,b.hE);var y=s(6080);function v(e){let{holdings:t}=e,s=t.filter(e=>"CASH"!==e.symbol).map(e=>{var t;let s=null!=(t=e.currentPrice)?t:e.purchasePrice,a=e.purchasePrice*e.quantity,r=s*e.quantity,l=r-a;return{symbol:e.symbol,name:e.name,quantity:e.quantity,avgBuyPrice:e.purchasePrice,currentPrice:s,totalCost:a,totalValue:r,totalGain:l,gainPercentage:a>0?l/a*100:0,isPositive:l>=0}}),r=s.reduce((e,t)=>({totalCost:e.totalCost+t.totalCost,totalValue:e.totalValue+t.totalValue,totalGain:e.totalGain+t.totalGain}),{totalCost:0,totalValue:0,totalGain:0}),l=r.totalCost>0?r.totalGain/r.totalCost*100:0;return 0===s.length?(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Portfolio Performance"}),(0,a.jsx)("div",{className:"flex items-center justify-center h-32 text-gray-500",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl mb-2",children:"\uD83D\uDCC8"}),(0,a.jsx)("div",{children:"No stocks to display"}),(0,a.jsx)("div",{className:"text-sm",children:"Add stocks to see performance details"})]})})]}):(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 font-heading",children:"Portfolio Performance"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Detailed performance analysis for each holding"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Cost"}),(0,a.jsxs)("div",{className:"text-lg font-semibold",children:["$",r.totalCost.toLocaleString(void 0,{maximumFractionDigits:2})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Value"}),(0,a.jsxs)("div",{className:"text-lg font-semibold",children:["$",r.totalValue.toLocaleString(void 0,{maximumFractionDigits:2})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Gain/Loss"}),(0,a.jsxs)("div",{className:"text-lg font-semibold ".concat(r.totalGain>=0?"text-green-600":"text-red-600"),children:[r.totalGain>=0?"+":"","$",r.totalGain.toLocaleString(void 0,{maximumFractionDigits:2})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Return"}),(0,a.jsxs)("div",{className:"text-lg font-semibold ".concat(l>=0?"text-green-600":"text-red-600"),children:[l>=0?"+":"",l.toFixed(2),"%"]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50 border-b",children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Symbol"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Name"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Quantity"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Avg Buy Price"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Current Price"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Total Cost"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Total Value"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Total Gain/Loss"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Return %"})]})}),(0,a.jsxs)("tbody",{children:[s.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b ".concat(t%2==0?"bg-white":"bg-gray-50"),children:[(0,a.jsx)("td",{className:"px-4 py-3 font-semibold text-gray-900",children:e.symbol}),(0,a.jsx)("td",{className:"px-4 py-3 text-gray-700",children:e.name}),(0,a.jsx)("td",{className:"px-4 py-3 text-gray-700",children:e.quantity.toLocaleString()}),(0,a.jsxs)("td",{className:"px-4 py-3 text-gray-700",children:["$",e.avgBuyPrice.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-gray-700",children:["$",e.currentPrice.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-gray-700",children:["$",e.totalCost.toLocaleString(void 0,{maximumFractionDigits:2})]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-gray-700",children:["$",e.totalValue.toLocaleString(void 0,{maximumFractionDigits:2})]}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center",children:[e.isPositive?(0,a.jsx)(d.A,{className:"w-4 h-4 text-green-600 mr-1"}):(0,a.jsx)(y.A,{className:"w-4 h-4 text-red-600 mr-1"}),(0,a.jsxs)("span",{className:"font-semibold ".concat(e.isPositive?"text-green-600":"text-red-600"),children:[e.totalGain>=0?"+":"","$",e.totalGain.toLocaleString(void 0,{maximumFractionDigits:2})]})]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("span",{className:"font-semibold ".concat(e.isPositive?"text-green-600":"text-red-600"),children:[e.gainPercentage>=0?"+":"",e.gainPercentage.toFixed(2),"%"]})})]},e.symbol+"-"+t)),(0,a.jsxs)("tr",{className:"bg-blue-50 border-t-2 border-blue-200",children:[(0,a.jsx)("td",{className:"px-4 py-3 font-bold text-gray-900",colSpan:5,children:"TOTAL"}),(0,a.jsxs)("td",{className:"px-4 py-3 font-bold text-gray-900",children:["$",r.totalCost.toLocaleString(void 0,{maximumFractionDigits:2})]}),(0,a.jsxs)("td",{className:"px-4 py-3 font-bold text-gray-900",children:["$",r.totalValue.toLocaleString(void 0,{maximumFractionDigits:2})]}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center",children:[r.totalGain>=0?(0,a.jsx)(d.A,{className:"w-4 h-4 text-green-600 mr-1"}):(0,a.jsx)(y.A,{className:"w-4 h-4 text-red-600 mr-1"}),(0,a.jsxs)("span",{className:"font-bold ".concat(r.totalGain>=0?"text-green-600":"text-red-600"),children:[r.totalGain>=0?"+":"","$",r.totalGain.toLocaleString(void 0,{maximumFractionDigits:2})]})]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsxs)("span",{className:"font-bold ".concat(l>=0?"text-green-600":"text-red-600"),children:[l>=0?"+":"",l.toFixed(2),"%"]})})]})]})]})}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm text-green-600 font-medium",children:"Winning Positions"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-700",children:s.filter(e=>e.isPositive).length}),(0,a.jsx)("div",{className:"text-xs text-green-600",children:s.length>0?"".concat((s.filter(e=>e.isPositive).length/s.length*100).toFixed(1),"% of portfolio"):"0% of portfolio"})]}),(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm text-red-600 font-medium",children:"Losing Positions"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-red-700",children:s.filter(e=>!e.isPositive).length}),(0,a.jsx)("div",{className:"text-xs text-red-600",children:s.length>0?"".concat((s.filter(e=>!e.isPositive).length/s.length*100).toFixed(1),"% of portfolio"):"0% of portfolio"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm text-blue-600 font-medium",children:"Best Performer"}),s.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-lg font-bold text-blue-700",children:s.reduce((e,t)=>t.gainPercentage>e.gainPercentage?t:e).symbol}),(0,a.jsxs)("div",{className:"text-xs text-blue-600",children:[s.reduce((e,t)=>t.gainPercentage>e.gainPercentage?t:e).gainPercentage.toFixed(2),"% return"]})]}):(0,a.jsx)("div",{className:"text-sm text-blue-600",children:"No stocks"})]})]})]})}function j(e){let{holdings:t}=e,[s,l]=(0,r.useState)("1m"),[n,i]=(0,r.useState)([]),[o,c]=(0,r.useState)(!0),d=()=>{let e=t.filter(e=>"CASH"!==e.symbol);return 0===e.length?new Date:new Date(Math.min(...e.map(e=>new Date(e.purchaseDate).getTime())))},m=e=>{let s,a=new Date,r=d(),l=[];switch(e){case"1w":s=7;break;case"1m":default:s=30;break;case"3m":s=90;break;case"6m":s=180;break;case"1y":case"all":s=365}let n=t.reduce((e,t)=>{var s;return"CASH"===t.symbol?e+t.purchasePrice:e+(null!=(s=t.currentPrice)?s:t.purchasePrice)*t.quantity},0),i=Math.ceil((a.getTime()-r.getTime())/864e5);for(let e=s;e>=0;e--){let t,o=new Date(a);o.setDate(o.getDate()-e),t=o>=r?n*Math.pow(1+(Math.random()-.5)*.02,Math.min(Math.ceil((o.getTime()-r.getTime())/864e5),i)):0;let c=4500*Math.pow(1+(Math.random()-.5)*.015,s-e);l.push({date:o.toISOString().split("T")[0],portfolioValue:Math.max(0,t),sp500Value:Math.max(0,c)})}return l};(0,r.useEffect)(()=>{c(!0),setTimeout(()=>{i(m(s)),c(!1)},500)},[s,t]);let x=(()=>{if(n.length<2)return null;let e=n.filter(e=>e.portfolioValue>0);if(e.length<2)return null;let t=e[0].portfolioValue,s=e[e.length-1].portfolioValue,a=Math.pow(s/t,365/(e.length-1))-1,r=0,l=t;for(let t of e){t.portfolioValue>l&&(l=t.portfolioValue);let e=(l-t.portfolioValue)/l;e>r&&(r=e)}return{totalReturn:(s-t)/t*100,annualizedReturn:100*a,maxDrawdown:100*r,portfolioDays:e.length}})(),u=d(),h={labels:n.map(e=>new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Portfolio Value",data:n.map(e=>e.portfolioValue>0?e.portfolioValue:null),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,fill:!0,tension:.4,spanGaps:!0},{label:"S&P 500",data:n.map(e=>e.sp500Value),borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",borderWidth:2,fill:!1,tension:.4}]};return o?(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow border border-gray-200 p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),(0,a.jsx)("div",{className:"text-gray-600",children:"Loading performance data..."})]})})}):(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-heading",children:"Portfolio Performance History"}),(0,a.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,a.jsx)("strong",{children:"Portfolio Start Date:"})," ",u.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),x&&(0,a.jsxs)("span",{className:"ml-2",children:["(",x.portfolioDays," days of data)"]})]})}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:["1w","1m","3m","6m","1y","all"].map(e=>(0,a.jsxs)("button",{onClick:()=>l(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition ".concat(s===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["1w"===e&&"1 Week","1m"===e&&"1 Month","3m"===e&&"3 Months","6m"===e&&"6 Months","1y"===e&&"1 Year","all"===e&&"All Time"]},e))}),x&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm text-blue-600 font-medium",children:"Total Return"}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(x.totalReturn>=0?"text-green-600":"text-red-600"),children:[x.totalReturn>=0?"+":"",x.totalReturn.toFixed(2),"%"]})]}),(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm text-red-600 font-medium",children:"Max Drawdown"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-red-600",children:["-",x.maxDrawdown.toFixed(2),"%"]})]})]})]}),(0,a.jsx)("div",{className:"h-96",children:(0,a.jsx)(p.N1,{data:h,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20}},title:{display:!0,text:"Portfolio Performance History",font:{size:16,weight:"bold"},padding:{top:10,bottom:20}},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(e){let t=e.dataset.label||"",s=e.parsed.y;return null===s?"".concat(t,": No data"):"".concat(t,": $").concat(s.toLocaleString(void 0,{maximumFractionDigits:2}))}}}},scales:{x:{display:!0,title:{display:!0,text:"Date"}},y:{display:!0,title:{display:!0,text:"Value ($)"},ticks:{callback:function(e){return null===e?"":"$"+e.toLocaleString()}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}})}),(0,a.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:[(0,a.jsxs)("p",{className:"mb-2",children:[(0,a.jsx)("strong",{children:"Blue line:"})," Your portfolio value (starts from your first purchase)"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Red line:"})," S&P 500 index for comparison (shows full time range)"]})]})]})}b.t1.register(b.PP,b.kc,b.FN,b.No,b.hE,b.m_,b.s$,b.dN);var N=s(2990),w=s(8760),k=s(5842),S=s(3385),P=s(7521),C=s(447);function A(e){let{holdings:t,trades:s,onAddTrade:l}=e,[n,i]=(0,r.useState)([]),[o,c]=(0,r.useState)(!1),[m,x]=(0,r.useState)(null),[u,g]=(0,r.useState)("all");(0,r.useEffect)(()=>{s||i(t.filter(e=>"CASH"!==e.symbol).map(e=>({id:e.id,symbol:e.symbol,action:"buy",date:new Date(e.purchaseDate),price:e.purchasePrice,quantity:e.quantity,reason:e.buyReason||"Initial purchase",targetPrice:e.targetPrice,stopLoss:.9*e.purchasePrice,notes:e.notes||"",marketSentiment:"neutral",decisionFactors:{fundamental:!0,technical:!1,sentiment:!1,other:!1},outcome:"ongoing",actualReturn:e.currentPrice?(e.currentPrice-e.purchasePrice)/e.purchasePrice*100:void 0,lessons:""})))},[t,s]);let p=null!=s?s:n,b=s?()=>{}:i,f=null!=l?l:e=>{let t={...e,id:"trade-".concat(Date.now(),"-").concat(Math.random())};i(e=>[...e,t]),c(!1)},y=(()=>{let e=p.filter(e=>"ongoing"!==e.outcome),t=e.filter(e=>"profit"===e.outcome),s=e.filter(e=>"loss"===e.outcome),a=p.reduce((e,t)=>e+(t.actualReturn||0),0),r=e.length>0?a/e.length:0,l=e.length>0?t.length/e.length*100:0;return{totalTrades:p.length,completedTrades:e.length,profitableTrades:t.length,losingTrades:s.length,winRate:l,avgReturn:r,totalReturn:a}})(),v=p.filter(e=>{switch(u){case"buy":return"buy"===e.action;case"sell":return"sell"===e.action;case"profit":return"profit"===e.outcome;case"loss":return"loss"===e.outcome;default:return!0}}),j=e=>{x(e)},A=e=>{b(p.filter(t=>t.id!==e))};return console.log("trades",p),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-xl p-4 shadow border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Total Trades"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900 font-heading",children:y.totalTrades})]}),(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(N.A,{className:"w-6 h-6 text-blue-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl p-4 shadow border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Win Rate"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-600 font-heading",children:[y.winRate.toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(d.A,{className:"w-6 h-6 text-green-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl p-4 shadow border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Return"}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(y.avgReturn>=0?"text-green-600":"text-red-600"," font-heading"),children:[y.avgReturn>=0?"+":"",y.avgReturn.toFixed(2),"%"]})]}),(0,a.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,a.jsx)(w.A,{className:"w-6 h-6 text-yellow-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl p-4 shadow border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Completed"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600 font-heading",children:y.completedTrades})]}),(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(k.A,{className:"w-6 h-6 text-green-600"})})]})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:["all","buy","sell","profit","loss"].map(e=>(0,a.jsxs)("button",{onClick:()=>g(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition ".concat(u===e?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["all"===e&&"All Trades","buy"===e&&"Buys","sell"===e&&"Sells","profit"===e&&"Profitable","loss"===e&&"Losing"]},e))}),(0,a.jsxs)("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"w-4 h-4"}),"Add Trade"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow border border-gray-200 overflow-hidden",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trade"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outcome"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Return"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 ".concat("buy"===e.action?"bg-green-500":"bg-red-500")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.symbol}),(0,a.jsx)("div",{className:"text-sm text-gray-500 capitalize",children:e.action})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.date.toLocaleDateString()}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.price.toFixed(2)]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.quantity}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-900 max-w-xs truncate",title:e.reason,children:e.reason})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("profit"===e.outcome?"bg-green-100 text-green-800":"loss"===e.outcome?"bg-red-100 text-red-800":"breakeven"===e.outcome?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.outcome||"Ongoing"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:void 0!==e.actualReturn?(0,a.jsxs)("span",{className:"text-sm font-medium ".concat(e.actualReturn>=0?"text-green-600":"text-red-600"),children:[e.actualReturn>=0?"+":"",e.actualReturn.toFixed(2),"%"]}):(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"-"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>j(e),className:"text-blue-600 hover:text-blue-900",children:(0,a.jsx)(S.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>A(e.id),className:"text-red-600 hover:text-red-900",children:(0,a.jsx)(P.A,{className:"w-4 h-4"})})]})})]},e.id))})]})}),0===v.length&&(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsxs)("div",{className:"text-gray-500",children:[(0,a.jsx)(C.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,a.jsx)("div",{className:"text-lg font-medium",children:"No trades found"}),(0,a.jsx)("div",{className:"text-sm",children:"Add your first trade to start tracking your decisions"})]})})]}),(o||m)&&(0,a.jsx)(D,{trade:m,onSave:m?e=>{if(m){let t={...e,id:m.id};b(p.map(e=>e.id===m.id?t:e)),x(null)}}:f,onClose:()=>{c(!1),x(null)}})]})}function D(e){let{trade:t,onSave:s,onClose:l}=e,[n,i]=(0,r.useState)({symbol:(null==t?void 0:t.symbol)||"",action:(null==t?void 0:t.action)||"buy",date:(null==t?void 0:t.date.toISOString().split("T")[0])||new Date().toISOString().split("T")[0],price:(null==t?void 0:t.price)||0,quantity:(null==t?void 0:t.quantity)||0,reason:(null==t?void 0:t.reason)||"",targetPrice:(null==t?void 0:t.targetPrice)||0,stopLoss:(null==t?void 0:t.stopLoss)||0,notes:(null==t?void 0:t.notes)||"",marketSentiment:(null==t?void 0:t.marketSentiment)||"neutral",decisionFactors:(null==t?void 0:t.decisionFactors)||{fundamental:!1,technical:!1,sentiment:!1,other:!1},outcome:(null==t?void 0:t.outcome)||"ongoing",actualReturn:(null==t?void 0:t.actualReturn)||0,lessons:(null==t?void 0:t.lessons)||""});return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-heading",children:t?"Edit Trade":"Add New Trade"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s({...n,date:new Date(n.date),targetPrice:n.targetPrice||void 0,stopLoss:n.stopLoss||void 0,actualReturn:n.actualReturn||void 0})},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Symbol"}),(0,a.jsx)("input",{type:"text",value:n.symbol,onChange:e=>i({...n,symbol:e.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Action"}),(0,a.jsxs)("select",{value:n.action,onChange:e=>i({...n,action:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"buy",children:"Buy"}),(0,a.jsx)("option",{value:"sell",children:"Sell"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,a.jsx)("input",{type:"date",value:n.date,onChange:e=>i({...n,date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:n.price,onChange:e=>i({...n,price:parseFloat(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),(0,a.jsx)("input",{type:"number",value:n.quantity,onChange:e=>i({...n,quantity:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Market Sentiment"}),(0,a.jsxs)("select",{value:n.marketSentiment,onChange:e=>i({...n,marketSentiment:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"bullish",children:"Bullish"}),(0,a.jsx)("option",{value:"bearish",children:"Bearish"}),(0,a.jsx)("option",{value:"neutral",children:"Neutral"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buy/Sell Reason"}),(0,a.jsx)("textarea",{value:n.reason,onChange:e=>i({...n,reason:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"What was your reasoning for this trade?",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target Price (optional)"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:n.targetPrice,onChange:e=>i({...n,targetPrice:parseFloat(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stop Loss (optional)"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:n.stopLoss,onChange:e=>i({...n,stopLoss:parseFloat(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Decision Factors"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["fundamental","technical","sentiment","other"].map(e=>(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:n.decisionFactors[e],onChange:t=>i({...n,decisionFactors:{...n.decisionFactors,[e]:t.target.checked}}),className:"mr-2"}),(0,a.jsx)("span",{className:"text-sm capitalize",children:e})]},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,a.jsx)("textarea",{value:n.notes,onChange:e=>i({...n,notes:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Additional notes about this trade..."})]}),"sell"===n.action&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Outcome"}),(0,a.jsxs)("select",{value:n.outcome,onChange:e=>i({...n,outcome:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"profit",children:"Profit"}),(0,a.jsx)("option",{value:"loss",children:"Loss"}),(0,a.jsx)("option",{value:"breakeven",children:"Breakeven"}),(0,a.jsx)("option",{value:"ongoing",children:"Ongoing"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Return %"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:n.actualReturn,onChange:e=>i({...n,actualReturn:parseFloat(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 15.5 for 15.5%"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lessons Learned"}),(0,a.jsx)("textarea",{value:n.lessons,onChange:e=>i({...n,lessons:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"What did you learn from this trade?"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:t?"Update Trade":"Add Trade"}),(0,a.jsx)("button",{type:"button",onClick:l,className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition",children:"Cancel"})]})]})]})})}var F=s(5e3),T=s(543),L=s(8676),M=s(2867),q=s(7071);class R{calculateFearGreedIndex(e){let{currentVix:t,vixMA20:s,spyChange:a,vixChange:r,volume:l}=e,n=this.calculateVixScore(t),i=this.calculateVixMomentumScore(t,s),o=this.calculateMomentumScore(a,r),c=Math.round(n*this.movingAverageWeights.vix+i*this.movingAverageWeights.momentum+o*this.movingAverageWeights.breadth);return{index:Math.max(0,Math.min(100,c)),components:{vixScore:Math.round(n),vixMomentumScore:Math.round(i),momentumScore:Math.round(o)},interpretation:this.getInterpretation(c)}}calculateVixScore(e){return e<=12?100:e<=16?80:e<=20?60:e<=25?40:e<=30?20:10}calculateVixMomentumScore(e,t){if(!t)return 50;let s=e/t;return s<.8?80:s<.9?65:s<1.1?50:s<1.2?35:20}calculateMomentumScore(e,t){let s=50;return e>2?s+=20:e>1?s+=10:e>0?s+=5:e>-1?s-=5:e>-2?s-=10:s-=20,t<-15?s+=15:t<-10?s+=10:t<-5?s+=5:t>15?s-=15:t>10?s-=10:t>5&&(s-=5),s}getInterpretation(e){return e>=75?{level:"Extreme Greed",color:"#dc2626",advice:"The market may be overheated. Consider reducing risk exposure."}:e>=55?{level:"Greed",color:"#ea580c",advice:"Be cautious. Consider taking some profits."}:e>=45?{level:"Neutral",color:"#65a30d",advice:"Market sentiment is stable. Stay observant."}:e>=25?{level:"Fear",color:"#0891b2",advice:"Potential buying opportunity during market dips."}:{level:"Extreme Fear",color:"#7c3aed",advice:"Historically, this is often a great buying opportunity."}}calculateSimplifiedNYMO(e){let{spyChange:t,iwmChange:s,qqqChange:a,diaChange:r,vtiChange:l}=e,n=[t,s,a,r,l].filter(e=>void 0!==e);if(0===n.length)return 0;let i=(n.filter(e=>e>0).length-n.filter(e=>e<0).length)/n.length;return Math.max(-100,Math.min(100,50*i+10*(n.reduce((e,t)=>e+t,0)/n.length)))}constructor(){this.vixRanges={extremeFear:{min:0,max:12},fear:{min:12,max:20},neutral:{min:20,max:30},greed:{min:30,max:40},extremeGreed:{min:40,max:100}},this.movingAverageWeights={vix:.4,momentum:.3,breadth:.3}}}function I(e){let{title:t,value:s,img:r,source:l,link:n,description:i,hideSource:o=!1,valueColor:c,level:d,advice:m}=e,x=(0,a.jsxs)("div",{className:"flex flex-col items-center bg-white rounded-xl px-2 py-1 shadow-md hover:shadow-lg transition mx-1 min-w-[120px] max-w-[140px] min-h-[110px]",style:{boxSizing:"border-box"},children:[(0,a.jsx)("div",{className:"text-xs font-inter font-semibold text-gray-500 mb-1 text-center w-full",children:t}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col justify-center items-center w-full",children:[null!=s?(0,a.jsx)("div",{className:"text-4xl font-extrabold mb-1 font-mono tracking-tight ".concat("Fear & Greed"===t?Number(s)>=75?"bg-gradient-to-r from-pink-500 via-red-500 to-yellow-400 text-transparent bg-clip-text":25>=Number(s)?"bg-gradient-to-r from-blue-500 via-blue-400 to-teal-400 text-transparent bg-clip-text":"text-black":"Market Breadth"===t?Number(s)>=750?"bg-gradient-to-r from-pink-500 via-red-500 to-yellow-400 text-transparent bg-clip-text":200>=Number(s)?"bg-gradient-to-r from-blue-500 via-blue-400 to-teal-400 text-transparent bg-clip-text":"text-black":"NYMO"===t?Number(s)>=60?"bg-gradient-to-r from-pink-500 via-red-500 to-yellow-400 text-transparent bg-clip-text":-60>=Number(s)?"bg-gradient-to-r from-blue-500 via-blue-400 to-teal-400 text-transparent bg-clip-text":"text-black":"Plan B index"===t?15>Number(s)?"bg-gradient-to-r from-blue-500 via-blue-400 to-teal-400 text-transparent bg-clip-text":50>Number(s)?"text-black":70>Number(s)?"bg-gradient-to-r from-yellow-400 via-orange-400 to-orange-600 text-transparent bg-clip-text":"bg-gradient-to-r from-pink-500 via-red-500 to-yellow-400 text-transparent bg-clip-text":"text-black"),children:"NYMO"===t&&"number"==typeof s?Math.round(s):s}):null,l&&(0,a.jsx)("div",{className:"text-[9px] font-inter text-gray-400 mt-2 text-center w-full truncate whitespace-nowrap max-w-[90%]",children:"Plan B index"===t?l:(0,a.jsxs)(a.Fragment,{children:["Source: ",l]})})]}),d&&(0,a.jsx)("div",{className:"text-[8px] font-semibold mt-1 ".concat(c||""),children:d}),m&&(0,a.jsx)("div",{className:"text-[6px] text-gray-400 text-center",children:m})]});return n?(0,a.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",title:t,children:x}):x}let z=e=>/long-term|beginner|all investors/i.test(e)?"bg-green-100 text-green-700":/visual|technical|chart|screen|quant/i.test(e)?"bg-blue-100 text-blue-700":/practice|demo|paper/i.test(e)?"bg-yellow-100 text-yellow-700":/community|sentiment|macro|reading/i.test(e)?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700",G=e=>{let{name:t,url:s,bestFor:r,features:l,highlights:n,iconUrl:i}=e;return(0,a.jsxs)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"block bg-white rounded-xl shadow hover:shadow-lg transition p-5 border border-gray-200 hover:border-blue-400 cursor-pointer h-full font-sans",style:{textDecoration:"none",fontFamily:"Poppins, Montserrat, Inter, Arial, sans-serif"},children:[i&&(0,a.jsx)("img",{src:i,alt:t,className:"w-10 h-10 mb-2 mx-auto"}),(0,a.jsx)("div",{className:"text-lg font-bold text-gray-900 mb-1 text-center tracking-wide",style:{fontFamily:"Montserrat, Poppins, Inter, Arial, sans-serif"},children:t}),(0,a.jsxs)("div",{className:"text-xs font-semibold px-2 py-1 rounded mb-2 text-center inline-block ".concat(z(r)),style:{fontFamily:"Poppins, Inter, Arial, sans-serif"},children:["Best for: ",r]}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 mb-1 leading-snug",style:{fontFamily:"Inter, Poppins, Arial, sans-serif"},children:[(0,a.jsx)("span",{className:"font-semibold",children:"Main features:"})," ",l]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mb-1 leading-snug",style:{fontFamily:"Inter, Poppins, Arial, sans-serif"},children:[(0,a.jsx)("span",{className:"font-semibold",children:"Highlights:"})," ",n]}),(0,a.jsx)("div",{className:"text-blue-600 text-xs mt-2 text-center underline",style:{fontFamily:"Poppins, Inter, Arial, sans-serif"},children:"Visit Website"})]})};var B=s(2372),E=s(4089);async function V(e){let t=E.env.NEXT_PUBLIC_ALPHA_VANTAGE_API_KEY;if(!t)return null;let s="https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=".concat(e,"&apikey=").concat(t);try{var a;let e=await fetch(s),t=null==(a=(await e.json())["Global Quote"])?void 0:a["05. price"];return t?parseFloat(t):null}catch(e){return null}}async function O(){try{let e=await fetch("/api/market-sentiment/spy-ytd");if(!e.ok)throw Error("API error");let t=await e.json();return{ytd:t.ytd,startDate:t.startDate,endDate:t.endDate}}catch(e){return{ytd:10,startDate:"",endDate:""}}}let _=e=>{var t,s,r;let{summary:l,fearGreedValue:n,breadthValue:i,nymoValue:o,customValue:c,user:d,spyYTD:m,spyYTDStart:x,spyYTDEnd:u,holdings:h}=e;new R().calculateFearGreedIndex({currentVix:18.5,vixMA20:20.2,spyChange:1.2,vixChange:-5.3,volume:1e6});let g=function(e){return void 0===e?{text:"",color:""}:e<15?{text:"\uD83D\uDFE2 Aggressive Mode",color:"text-green-600"}:e<50?{text:"\uD83D\uDFE1 Normal Mode",color:"text-yellow-500"}:e<70?{text:"\uD83D\uDFE0 Reduce Mode",color:"text-orange-500"}:{text:"\uD83D\uDD34 Defensive Mode",color:"text-red-500"}}(null!=c?c:0);return(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"flex justify-center gap-1 mb-3",children:[(0,a.jsx)(I,{title:"NYMO",value:o,source:"StockCharts",link:"https://stockcharts.com/h-sc/ui?s=$NYMO"}),(0,a.jsx)(I,{title:"Market Breadth",value:i,source:"Trading Logic",link:"https://www.trading-logic.com/index.html"}),(0,a.jsx)(I,{title:"Fear & Greed",value:n,source:"CNN",link:"https://www.cnn.com/markets/fear-and-greed"}),(0,a.jsx)(I,{title:"Plan B index",value:c,source:(0,a.jsx)("span",{className:g.color,children:g.text})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow flex flex-col items-center",children:[(0,a.jsx)("div",{className:"text-gray-500 text-sm mb-1",children:"Total Portfolio Value"}),(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",l.totalValue.toLocaleString(void 0,{maximumFractionDigits:2})]}),(0,a.jsxs)("div",{className:"mt-2 text-yellow-700 bg-yellow-50 rounded-lg px-3 py-1 text-sm font-semibold",children:["Cash Balance: $",null!=(r=null==(s=h.find(e=>"CASH"===e.symbol))||null==(t=s.purchasePrice)?void 0:t.toLocaleString(void 0,{maximumFractionDigits:2}))?r:0]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow flex flex-col items-center",children:[(0,a.jsx)("div",{className:"text-gray-500 text-sm mb-1",children:"Total Gain/Loss"}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(l.totalGain>=0?"text-green-600":"text-red-600"),children:[l.totalGain>=0?"+":"","$",l.totalGain.toLocaleString(void 0,{maximumFractionDigits:2})]}),(0,a.jsxs)("div",{className:l.gainPercent>=0?"text-green-600 text-sm":"text-red-600 text-sm",children:[l.gainPercent>=0?"+":"",l.gainPercent.toFixed(2),"%"]})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl p-6 shadow flex flex-col items-center",children:!1!==l.hasStock&&void 0!==l.hasStock?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-gray-500 text-sm mb-1",children:"vs S&P 500"}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(l.vsSP500>=0?"text-blue-600":"text-red-600"),children:[l.vsSP500>=0?"+":"",l.vsSP500.toFixed(2),"%"]}),(0,a.jsx)("div",{className:"text-blue-600 text-sm",children:l.vsSP500>=0?"Outperformed":"Underperformed"})]}):x&&u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-gray-500 text-sm mb-1",children:"S&P 500 YTD Return"}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[m>=0?"+":"",Number(m).toFixed(2),"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:x&&u?"".concat(x.slice(5)," ~ ").concat(u.slice(5)):""})]}):(0,a.jsx)("div",{className:"text-gray-400 text-sm",children:"Loading S&P 500 YTD..."})})]})]})},$=[{key:"portfolio",label:"My Portfolio",icon:(0,a.jsx)(F.A,{size:20})},{key:"analysis",label:"Portfolio Analysis",icon:(0,a.jsx)(T.A,{size:20})},{key:"performance",label:"Performance Tracking",icon:(0,a.jsx)(d.A,{size:20})},{key:"insider",label:"Trade Log",icon:(0,a.jsx)(L.A,{size:20})},{key:"links",label:"Recommended Links",icon:(0,a.jsx)(M.A,{size:20})},{key:"feedback",label:"Feedback",icon:(0,a.jsx)(q.A,{size:20})}],H={id:"cash",symbol:"CASH",name:"Cash",quantity:1,purchasePrice:0,currentPrice:1,targetPrice:1,notes:"",purchaseDate:new Date};async function W(e){try{var t;let s=await fetch("https://plan-b-p4t8.onrender.com/api/quote/".concat(e)),a=await s.json();return console.log("fetchYahooPrice",e,a),null!=(t=a.price)?t:null}catch(t){return console.error("fetchYahooPrice error",e,t),null}}function U(){var e,t,s;let[o,d]=(0,r.useState)("portfolio"),[u,p]=(0,r.useState)("holdings"),[b,y]=(0,r.useState)([H]),[N,w]=(0,r.useState)([]),[k,S]=(0,r.useState)(!1),[C,D]=(0,r.useState)(null),[F,T]=(0,r.useState)(null),[L,M]=(0,r.useState)(!0),[q,R]=(0,r.useState)(!1),[I,z]=(0,r.useState)(0),[E,U]=(0,r.useState)({}),[Q,X]=(0,r.useState)(10),[J,K]=(0,r.useState)(""),[Z,ee]=(0,r.useState)(""),[et,es]=(0,r.useState)(null),ea=(0,l.useRouter)(),[er,el]=(0,r.useState)(!1),[en,ei]=(0,r.useState)(null),[eo,ec]=(0,r.useState)(!1),[ed,em]=(0,r.useState)(null),[ex,eu]=(0,r.useState)([]),[eh,eg]=(0,r.useState)(null),[ep,eb]=(0,r.useState)(!1),[ef,ey]=(0,r.useState)({quantity:0,price:0,date:"",reason:""}),[ev,ej]=(0,r.useState)([]),eN=e=>{ej(t=>[...t,{...e,id:"trade-".concat(Date.now(),"-").concat(Math.random())}])},ew=()=>{let e=[...b,...N].filter(e=>"CASH"!==e.symbol&&e.targetPrice&&e.currentPrice&&e.currentPrice>=e.targetPrice);eu(t=>{let s=t.map(e=>e.id);return[...t,...e.filter(e=>!s.includes(e.id))]})};(0,r.useEffect)(()=>{let e=(0,i.hg)(n.j,async e=>{if(T(e),e)try{let t=await (0,i.p9)(e),s=await fetch("/api/auth/firebase",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firebaseToken:t})});if(s.ok){let e=await s.json();D(e.token),localStorage.setItem("token",e.token)}else D(null),localStorage.removeItem("token")}catch(e){D(null),localStorage.removeItem("token")}else D(null),localStorage.removeItem("token");M(!1)});return()=>e()},[]),(0,r.useEffect)(()=>{C&&(M(!0),(async()=>{try{let e=await fetch("/api/portfolio",{headers:{Authorization:"Bearer ".concat(C)}});if(!e.ok)return void M(!1);let t=await e.json();if(t.portfolio&&Array.isArray(t.portfolio.stocks)){let e=t.portfolio.stocks.length>0?t.portfolio.stocks.map((e,t)=>({...e,id:e.id||e._id||"".concat(e.symbol,"-").concat(t,"-").concat(Date.now())})):[H];y(e)}}catch(e){}M(!1)})())},[C]);let ek=(0,r.useRef)(!0),eS=(0,r.useRef)(!1),eP=(0,r.useRef)("");(0,r.useEffect)(()=>{if(!C)return;if(ek.current){ek.current=!1;return}if(eS.current){eS.current=!1;return}let e=JSON.stringify(b);e!==eP.current&&(async()=>{try{(await fetch("/api/portfolio",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(C)},body:JSON.stringify({name:"My Portfolio",stocks:b})})).ok&&(eP.current=e)}catch(e){}})()},[b,C]),(0,r.useEffect)(()=>{O().then(e=>{console.log("SPY YTD API 回傳：",e),X(e.ytd),K(e.startDate),ee(e.endDate)})},[]),(0,r.useEffect)(()=>{0!==b.length&&(async()=>{el(!0);let e=await Promise.all(b.map(async e=>{if("CASH"===e.symbol)return e;let t=await W(e.symbol);return console.log("update price",e.symbol,t),{...e,currentPrice:null!=t?t:e.purchasePrice}}));console.log("setHoldings",e),y(e),el(!1)})()},[]);let eC=async()=>{el(!0),y(await Promise.all(b.map(async e=>{if("CASH"===e.symbol)return e;let t=await W(e.symbol);return{...e,currentPrice:null!=t?t:e.purchasePrice}}))),el(!1),setTimeout(ew,0)};(0,r.useEffect)(()=>{async function e(e,t){t(await Promise.all(e.map(async e=>{let t=await V(e.symbol);return{...e,currentPrice:null!=t?t:e.currentPrice,lastUpdated:new Date}})))}b.length>0&&e(b,y),N.length>0&&e(N,w)},[]),(0,r.useEffect)(()=>{let e=()=>{fetch("https://docs.google.com/spreadsheets/d/1IsW0mGmFZKegdBA44QK2TXmA5jTTX13RJRqfplsUWXw/gviz/tq?tqx=out:json&gid=0&rand=".concat(Date.now())).then(e=>e.text()).then(e=>{var t,s,a,r,l,n,i,o;let c=JSON.parse(e.replace(/^[^\(]+\(|\);?$/g,"")).table.rows.map(e=>e.c.map(e=>{var t;return null!=(t=null==e?void 0:e.v)?t:""}));U({cnn:null!=(l=null==(t=c[1])?void 0:t[1])?l:"",nymo:null!=(n=null==(s=c[2])?void 0:s[1])?n:"",breadth:null!=(i=null==(a=c[3])?void 0:a[1])?i:"",custom:null!=(o=null==(r=c[4])?void 0:r[1])?o:""})})};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[]);let eA=(e,t)=>{"holdings"===t?y(t=>{let s=t.filter(t=>t.id!==e);return setTimeout(ew,0),s}):w(t=>{let s=t.filter(t=>t.id!==e);return setTimeout(ew,0),s}),B.Ay.success("已刪除！")},eD=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,s=0,a=0,r=0,l=0,n=!1;e.forEach(e=>{if("CASH"===e.symbol)s+=e.purchasePrice;else{var t;let i=(null!=(t=e.currentPrice)?t:e.purchasePrice)*e.quantity;s+=i,a+=e.purchasePrice*e.quantity,r+=i,l+=e.purchasePrice*e.quantity,n=!0}});let i=r-l,o=0,c=0;return n&&l>0?c=(o=i/l*100)-t:(o=0,c=-t),{totalValue:s,totalGain:i,gainPercent:o,vsSP500:c}}(b,Q),eF=e=>{let{list:t,type:s}=e;return(0,a.jsx)("div",{className:"overflow-x-auto bg-white rounded-2xl shadow border border-gray-200 p-6",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50",children:[(0,a.jsx)("th",{className:"px-3 py-2 text-center",children:"Symbol"}),(0,a.jsx)("th",{className:"px-3 py-2 text-center",children:"Name"}),"holdings"===s&&(0,a.jsx)("th",{className:"px-3 py-2 text-center",children:"Quantity"}),"holdings"===s&&(0,a.jsx)("th",{className:"px-3 py-2 text-center",children:"Buy Price"}),(0,a.jsx)("th",{className:"px-3 py-2 text-center",children:"Current Price"}),(0,a.jsx)("th",{className:"px-3 py-2 text-center",children:"Target Price"}),(0,a.jsx)("th",{className:"px-3 py-2 text-center",children:"Notes"}),(0,a.jsx)("th",{className:"px-3 py-2 text-center",children:"Alert"}),(0,a.jsx)("th",{className:"px-3 py-2 text-center",children:"Action"})]})}),(0,a.jsxs)("tbody",{children:[t.map(e=>(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("td",{className:"px-3 py-2 font-semibold",children:e.symbol}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.name}),"holdings"===s&&(0,a.jsx)("td",{className:"px-3 py-2",children:e.quantity}),"holdings"===s&&(0,a.jsxs)("td",{className:"px-3 py-2",children:["$",e.purchasePrice]}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.currentPrice?"$".concat(e.currentPrice):"-"}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.targetPrice?"$".concat(e.targetPrice):"-"}),(0,a.jsx)("td",{className:"px-3 py-2",children:e.notes}),(0,a.jsx)("td",{className:"px-3 py-2 text-center align-middle",children:e.currentPrice&&e.targetPrice&&e.currentPrice>=e.targetPrice?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full font-semibold text-sm shadow-sm whitespace-nowrap",children:[(0,a.jsx)("span",{className:"text-base",children:"\uD83C\uDFAF"}),"Target reached!"]}):(0,a.jsx)("span",{className:"opacity-0 select-none",children:"Target reached!"})}),(0,a.jsxs)("td",{className:"px-3 py-2",children:[(0,a.jsx)("button",{onClick:()=>{ei(e),ec(!0)},className:"text-gray-600 hover:text-blue-600 mr-2",title:"Edit",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536M9 13h3l8-8a2.828 2.828 0 00-4-4l-8 8v3zm0 0v3a2 2 0 002 2h3"})})}),"holdings"===s&&(0,a.jsx)("button",{onClick:()=>{eg(e),ey({quantity:e.quantity,price:e.currentPrice||e.purchasePrice,date:new Date().toISOString().slice(0,10),reason:""}),eb(!0)},className:"text-red-500 hover:text-red-700 mr-2 font-bold",title:"Sell",children:"Sell"}),(0,a.jsx)("button",{onClick:()=>eA(e.id,s),className:"text-red-600 hover:text-red-800",title:"Delete",children:(0,a.jsx)(P.A,{className:"w-4 h-4"})})]})]},e.id)),0===t.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"holdings"===s?9:8,className:"text-center text-gray-400 py-4",children:"No data yet."})})]})]})})};return((0,r.useEffect)(()=>{b&&0!==b.length&&ej(e=>0===e.length?[...e,...b.filter(e=>"CASH"!==e.symbol).map(e=>({id:"trade-".concat(Date.now(),"-").concat(Math.random()),symbol:e.symbol,action:"buy",date:e.purchaseDate instanceof Date?e.purchaseDate:new Date(e.purchaseDate),price:e.purchasePrice,quantity:e.quantity,reason:e.buyReason||"Initial purchase",targetPrice:e.targetPrice,stopLoss:void 0,notes:e.notes||"",marketSentiment:"neutral",decisionFactors:{fundamental:!0,technical:!1,sentiment:!1,other:!1},outcome:"ongoing",actualReturn:void 0,lessons:""}))]:e)},[b]),L)?(0,a.jsx)("div",{className:"flex items-center justify-center h-screen text-xl",children:"Loading..."}):(0,a.jsxs)(c,{children:[(0,a.jsx)(B.l$,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(m,{}),F?(0,a.jsx)("button",{onClick:async()=>{await (0,i.CI)(n.j),ea.push("/")},className:"ml-auto px-4 py-2 bg-gray-900 text-white rounded hover:bg-gray-700",children:"Logout"}):(0,a.jsx)("button",{onClick:()=>ea.push("/login"),className:"ml-auto px-4 py-2 bg-gray-900 text-white rounded hover:bg-gray-700",children:"Login"})]}),(0,a.jsx)("div",{className:"max-w-5xl mx-auto py-8",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"w-64 min-h-screen bg-gradient-to-b from-gray-50 to-gray-200 border-r shadow flex flex-col py-8 px-4",children:$.map(e=>(0,a.jsxs)("button",{onClick:()=>d(e.key),className:"flex items-center gap-3 w-full text-left px-4 py-3 mb-2 rounded-xl transition font-semibold ".concat(o===e.key?"bg-gray-900 text-white shadow":"text-gray-900 hover:bg-gray-300"),children:[e.icon,e.label]},e.key))}),(0,a.jsxs)("div",{className:"flex-1 p-8",children:["portfolio"===o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_,{summary:eD,fearGreedValue:E.cnn?Number(E.cnn):0,breadthValue:E.breadth?Number(E.breadth):0,nymoValue:E.nymo?Number(E.nymo):0,customValue:E.custom?Number(E.custom):0,user:F,spyYTD:Q,spyYTDStart:J,spyYTDEnd:Z,holdings:b}),(0,a.jsxs)("div",{className:"flex items-center gap-8 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{className:"h-12 px-7 rounded-full text-base font-inter font-bold transition shadow-md hover:shadow-xl hover:scale-105 duration-150\n      ".concat("holdings"===u?"bg-gray-700 text-white":"bg-gray-500 text-white hover:bg-gray-700"),onClick:()=>p("holdings"),children:"Holdings"}),(0,a.jsx)("button",{className:"h-12 px-7 rounded-full text-base font-inter font-bold transition shadow-md hover:shadow-xl hover:scale-105 duration-150\n      ".concat("watching"===u?"bg-gray-700 text-white":"bg-gray-500 text-white hover:bg-gray-700"),onClick:()=>p("watching"),children:"Watching"}),(0,a.jsx)("button",{onClick:eC,className:"h-12 px-7 rounded-full text-base font-inter font-bold transition shadow-md hover:shadow-xl hover:scale-105 duration-150 bg-gray-500 text-white hover:bg-gray-700",disabled:er,style:{minWidth:140},children:er?"Refreshing...":"Refresh Prices"})]}),(0,a.jsx)("div",{className:"h-10 w-px bg-gray-300 mx-2"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>{let e=b.find(e=>"CASH"===e.symbol);console.log("Editing cash, current cash:",e),z(e?e.purchasePrice:0),R(!0)},className:"h-12 px-7 rounded-full text-base font-inter font-bold transition shadow-md hover:shadow-xl hover:scale-105 duration-150 bg-white text-gray-900 border border-gray-300 hover:bg-gray-100",children:"Edit Cash"}),(0,a.jsxs)("button",{onClick:()=>S(!0),className:"h-12 px-7 rounded-full text-base font-inter font-bold flex items-center space-x-2 transition shadow-md hover:shadow-xl hover:scale-105 duration-150 bg-white text-gray-900 border border-gray-300 hover:bg-gray-100",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 text-gray-900"}),(0,a.jsx)("span",{children:"Add Stock"})]})]})]}),"holdings"===u?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(eF,{list:b.filter(e=>"CASH"!==e.symbol),type:"holdings"})}):(0,a.jsx)(eF,{list:N,type:"watching"}),(0,a.jsx)(x.A,{isOpen:k,onClose:()=>S(!1),title:"holdings"===u?"Add to Holdings":"Add to Watching",children:(0,a.jsx)(g,{onAdd:e=>{"holdings"===u?(y(t=>{let s=[...t,{...e,id:e.id||"".concat(e.symbol,"-").concat(Date.now(),"-").concat(Math.random())}];return setTimeout(ew,0),s}),eN({symbol:e.symbol,action:"buy",date:new Date(e.purchaseDate),price:e.purchasePrice,quantity:e.quantity,reason:e.buyReason||"Initial purchase",targetPrice:e.targetPrice,stopLoss:void 0,notes:e.notes||"",marketSentiment:"neutral",decisionFactors:{fundamental:!0,technical:!1,sentiment:!1,other:!1},outcome:"ongoing",actualReturn:void 0,lessons:""})):w(t=>{let s=[...t,{...e,id:e.id||"".concat(e.symbol,"-").concat(Date.now(),"-").concat(Math.random()),quantity:0,purchasePrice:0,purchaseDate:new Date}];return setTimeout(ew,0),s}),S(!1),B.Ay.success("已新增 Added!")},onClose:()=>S(!1)})}),eo&&en&&(0,a.jsx)(x.A,{isOpen:eo,onClose:()=>ec(!1),title:"Edit Stock",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"holdings"===u?y(e=>e.map(e=>e.id===en.id?{...en}:e)):w(e=>e.map(e=>e.id===en.id?{...en}:e)),ec(!1),B.Ay.success("已更新 Updated!"),setTimeout(ew,0)},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold mb-1",children:"Quantity"}),(0,a.jsx)("input",{type:"number",className:"w-full border rounded px-3 py-2",value:en.quantity,onChange:e=>ei({...en,quantity:Number(e.target.value)}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold mb-1",children:"Buy Price"}),(0,a.jsx)("input",{type:"number",className:"w-full border rounded px-3 py-2",value:en.purchasePrice,onChange:e=>ei({...en,purchasePrice:Number(e.target.value)}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold mb-1",children:"Target Price"}),(0,a.jsx)("input",{type:"number",className:"w-full border rounded px-3 py-2",value:en.targetPrice||"",onChange:e=>ei({...en,targetPrice:Number(e.target.value)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold mb-1",children:"Notes"}),(0,a.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:en.notes||"",onChange:e=>ei({...en,notes:e.target.value})})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,a.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Save"}),(0,a.jsx)("button",{type:"button",className:"flex-1 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",onClick:()=>ec(!1),children:"Cancel"})]})]})}),(0,a.jsxs)(x.A,{isOpen:q,onClose:()=>R(!1),title:"Edit Cash",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cash Amount"}),(0,a.jsx)("input",{type:"number",value:I,onChange:e=>z(Number(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",min:0})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>R(!1),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{console.log("Saving cash, new amount:",I),y(e=>{let t=e.filter(e=>"CASH"!==e.symbol),s=[{...H,purchasePrice:I,purchaseDate:new Date},...t];return console.log("New holdings after cash update:",s),s}),R(!1)},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save"})]})]}),ep&&eh&&(0,a.jsxs)(x.A,{isOpen:ep,onClose:()=>eb(!1),title:"Sell ".concat(eh.symbol),children:[eh.buyReason&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 rounded",children:[(0,a.jsx)("span",{className:"font-bold",children:"你當初買入的理由："}),eh.buyReason]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y(e=>e.map(e=>e.id===eh.id?{...e,quantity:e.quantity-ef.quantity}:e).filter(e=>e.quantity>0||"CASH"===e.symbol));let t=eh.purchasePrice,s=ef.price,a="breakeven";a=s>t?"profit":s<t?"loss":"breakeven";let r=t?(s-t)/t*100:void 0,l={symbol:eh.symbol,action:"sell",date:new Date(ef.date),price:ef.price,quantity:ef.quantity,reason:ef.reason,targetPrice:eh.targetPrice,stopLoss:void 0,notes:eh.notes||"",marketSentiment:"neutral",decisionFactors:{fundamental:!1,technical:!1,sentiment:!1,other:!1},outcome:a,actualReturn:r,lessons:""};console.log("add sell trade",{outcome:a,actualReturn:r,tradeObj:l});let n="profit"===a?"獲利 Profit":"loss"===a?"虧損 Loss":"打平 Breakeven";B.Ay.success("賣出成功，結果：".concat(n," | Sell success, outcome: ").concat(n)),eN(l),eb(!1)},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold mb-1",children:"Quantity"}),(0,a.jsx)("input",{type:"number",className:"w-full border rounded px-3 py-2",value:ef.quantity,min:1,max:eh.quantity,onChange:e=>ey(t=>({...t,quantity:Number(e.target.value)})),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold mb-1",children:"Sell Price"}),(0,a.jsx)("input",{type:"number",className:"w-full border rounded px-3 py-2",value:ef.price,onChange:e=>ey(t=>({...t,price:Number(e.target.value)})),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold mb-1",children:"Date"}),(0,a.jsx)("input",{type:"date",className:"w-full border rounded px-3 py-2",value:ef.date,onChange:e=>ey(t=>({...t,date:e.target.value})),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold mb-1",children:"Reason"}),(0,a.jsx)("input",{type:"text",className:"w-full border rounded px-3 py-2",value:ef.reason,onChange:e=>ey(t=>({...t,reason:e.target.value}))})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,a.jsx)("button",{type:"submit",className:"flex-1 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Confirm Sell"}),(0,a.jsx)("button",{type:"button",className:"flex-1 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",onClick:()=>eb(!1),children:"Cancel"})]})]})]})]}),"analysis"===o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_,{summary:eD,fearGreedValue:E.cnn?Number(E.cnn):0,breadthValue:E.breadth?Number(E.breadth):0,nymoValue:E.nymo?Number(E.nymo):0,customValue:E.custom?Number(E.custom):0,user:F,spyYTD:Q,spyYTDStart:J,spyYTDEnd:Z,holdings:b}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,a.jsx)(f,{holdings:b}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Stats"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Holdings"}),(0,a.jsx)("span",{className:"font-semibold",children:b.filter(e=>"CASH"!==e.symbol).length})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Cash Balance"}),(0,a.jsxs)("span",{className:"font-semibold",children:["$",null!=(s=null==(t=b.find(e=>"CASH"===e.symbol))||null==(e=t.purchasePrice)?void 0:e.toLocaleString(void 0,{maximumFractionDigits:2}))?s:0]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Portfolio Value"}),(0,a.jsxs)("span",{className:"font-semibold",children:["$",eD.totalValue.toLocaleString(void 0,{maximumFractionDigits:2})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Gain/Loss"}),(0,a.jsxs)("span",{className:"font-semibold ".concat(eD.totalGain>=0?"text-green-600":"text-red-600"),children:[eD.totalGain>=0?"+":"","$",eD.totalGain.toLocaleString(void 0,{maximumFractionDigits:2})]})]})]})]})]}),(0,a.jsx)(v,{holdings:b})]}),"performance"===o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold font-heading mb-2",children:"Performance Tracking"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Track your portfolio performance over time and compare with market benchmarks"})]}),(0,a.jsx)(j,{holdings:b})]}),"insider"===o&&(0,a.jsx)(A,{holdings:b,trades:ev,onAddTrade:eN}),"links"===o&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-xl font-semibold text-center mb-6",children:[(0,a.jsx)("span",{className:"font-handwriting block",children:"“Compound interest is the eighth wonder of the world.”"}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-gray-500 text-base",children:"— Albert Einstein"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:[{name:"Morningstar",url:"https://www.morningstar.com",bestFor:"Long-term investors, beginners",features:"Stock ratings, fundamental analysis, portfolio tools",highlights:"Authoritative research, reliable data",iconUrl:"https://www.google.com/s2/favicons?sz=64&domain_url=https://www.morningstar.com"},{name:"Simply Wall St",url:"https://simplywall.st",bestFor:"Visual learners",features:"Bubble charts, snowflake visualizations",highlights:"Turns complex data into intuitive graphics",iconUrl:"https://www.google.com/s2/favicons?sz=64&domain_url=https://simplywall.st"},{name:"Zacks Investment Research",url:"https://www.zacks.com",bestFor:"Investors who value analyst opinions",features:"Stock ratings, earnings forecasts, research reports",highlights:"Famous earnings revision model",iconUrl:"https://www.google.com/s2/favicons?sz=64&domain_url=https://www.zacks.com"},{name:"Yahoo Finance",url:"https://finance.yahoo.com",bestFor:"All investors",features:"Free financial data, news, charts",highlights:"Comprehensive, free, clean interface",iconUrl:"https://www.google.com/s2/favicons?sz=64&domain_url=https://finance.yahoo.com"},{name:"Seeking Alpha",url:"https://seekingalpha.com",bestFor:"Investors who like reading analysis articles",features:"Investment articles, user analysis, stock discussions",highlights:"Community-driven investment platform",iconUrl:"https://www.google.com/s2/favicons?sz=64&domain_url=https://seekingalpha.com"},{name:"TradingView",url:"https://www.tradingview.com",bestFor:"Technical analysis enthusiasts",features:"Professional charting tools, indicators, community",highlights:"Best-in-class charting, strong free version",iconUrl:"https://www.google.com/s2/favicons?sz=64&domain_url=https://www.tradingview.com"},{name:"Finviz",url:"https://finviz.com",bestFor:"Investors who need fast stock screening",features:"Stock screener, market heatmaps, technical analysis",highlights:"Screener, Maps, and visual market performance",iconUrl:"https://www.google.com/s2/favicons?sz=64&domain_url=https://finviz.com"},{name:"Portfolio Visualizer",url:"https://www.portfoliovisualizer.com",bestFor:"Quantitative investors, backtesters",features:"Portfolio backtesting, asset allocation analysis",highlights:"Powerful historical backtesting, free",iconUrl:"https://www.google.com/s2/favicons?sz=64&domain_url=https://www.portfoliovisualizer.com"},{name:"Robinhood",url:"https://robinhood.com",bestFor:"Beginner investors",features:"Stock trading, zero commission",highlights:"Simple, clear charts, easy to use",iconUrl:"https://www.google.com/s2/favicons?sz=64&domain_url=https://robinhood.com"},{name:"Webull",url:"https://www.webull.com",bestFor:"Investors who want to practice",features:"Stock trading, paper trading",highlights:"Demo accounts for strategy practice",iconUrl:"https://www.google.com/s2/favicons?sz=64&domain_url=https://www.webull.com"},{name:"Copilot.money",url:"https://copilot.money/download/",bestFor:"Investors needing professional portfolio management",features:"Portfolio tracking, performance analysis, asset allocation",highlights:"Auto-sync bank accounts, pro-level analytics",iconUrl:"https://www.google.com/s2/favicons?sz=64&domain_url=https://copilot.money"},{name:"FRED",url:"https://fred.stlouisfed.org",bestFor:"Macro-focused investors",features:"Federal Reserve economic data, charting tools",highlights:"Authoritative, free economic data",iconUrl:"https://www.google.com/s2/favicons?sz=64&domain_url=https://fred.stlouisfed.org"},{name:"CNN Fear & Greed Index",url:"https://www.cnn.com/markets/fear-and-greed",bestFor:"Sentiment-focused investors",features:"Fear & Greed index, market sentiment analysis",highlights:"Composite sentiment index from 7 indicators",iconUrl:"https://www.google.com/s2/favicons?sz=64&domain_url=https://www.cnn.com"},{name:"VIX Central",url:"https://vixcentral.com",bestFor:"Volatility traders",features:"VIX data, term structure analysis",highlights:"Professional volatility data platform",iconUrl:"https://www.google.com/s2/favicons?sz=64&domain_url=https://vixcentral.com"},{name:"StreakyAlgo TSLA Multi-Timeframe Technical Scores",url:"https://wztctech.com/index/chart/score/stock?code=TSLA#google_vignette",bestFor:"Technical traders, TSLA enthusiasts",features:"Multi-timeframe technical analysis for TSLA (30m, 2h, daily, weekly, monthly)",highlights:"Quickly assess TSLA trends across different timeframes",iconUrl:"https://www.google.com/s2/favicons?sz=64&domain_url=https://wztctech.com"},{name:"SqueezeMetrics DIX/GEX Monitor",url:"https://www.squeezemetrics.com/monitor/dix?",bestFor:"Sentiment and options flow analysts",features:"Real-time DIX (Dark Index) and GEX (Gamma Exposure) for US equities",highlights:"Unique insights into institutional activity and market positioning",iconUrl:"https://www.google.com/s2/favicons?sz=64&domain_url=https://www.squeezemetrics.com"}].sort((e,t)=>e.name.localeCompare(t.name)).map(e=>(0,a.jsx)(G,{...e},e.name))}),(0,a.jsxs)("div",{className:"mt-8 text-sm text-gray-600",children:[(0,a.jsx)("div",{className:"font-semibold mb-2",children:"Tips:"}),(0,a.jsxs)("ul",{className:"list-disc pl-5",children:[(0,a.jsx)("li",{children:"Prefer free tools: Most features are sufficient in the free version."}),(0,a.jsx)("li",{children:"Combine tools: Each tool has its own strengths—use them together."}),(0,a.jsx)("li",{children:"Cross-check data: For important decisions, compare multiple sources."}),(0,a.jsx)("li",{children:"Stay updated: Tools evolve, check for new features regularly."})]})]}),(0,a.jsxs)("div",{className:"mt-10",children:[(0,a.jsx)("div",{className:"font-semibold mb-2 text-base",children:"Further Reading:"}),(0,a.jsx)("ul",{className:"list-disc pl-5 text-sm",children:(0,a.jsxs)("li",{children:[(0,a.jsx)("a",{href:"https://www.wrightresearch.in/blog/how-greed-and-fear-drive-stock-market-investors/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"How Greed and Fear Drive Stock Market Investors (Wright Research)"}),(0,a.jsx)("span",{className:"text-gray-500 ml-2",children:"— A clear explanation of the CNN Fear & Greed Index and its key indicators."})]})})]})]}),"feedback"===o&&(0,a.jsx)(Y,{}),ex.length>0&&(0,a.jsx)(x.A,{isOpen:!0,onClose:()=>eu(e=>e.slice(1)),title:" \uD83D\uDE80 Target Reached \uD83D\uDE80",children:(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsxs)("div",{className:"text-lg font-bold",children:[ex[0].name," (",ex[0].symbol,")"]}),(0,a.jsxs)("div",{className:"text-gray-700",children:["Current Price: ",(0,a.jsxs)("span",{className:"font-bold text-blue-600",children:["$",ex[0].currentPrice]})]}),(0,a.jsxs)("div",{className:"text-gray-700",children:["Target Price: ",(0,a.jsxs)("span",{className:"font-bold text-green-600",children:["$",ex[0].targetPrice]})]}),(0,a.jsx)("button",{className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:()=>eu(e=>e.slice(1)),children:"Got it"})]})})]})]})}),(0,a.jsxs)("p",{className:"text-xs text-red-500 mt-6 font-wenkai text-center",children:["本網站所有內容僅供學術與交流參考，非投資建議，投資盈虧請自負。",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-gray-500 font-inter",children:"All content on this site is for academic and communication purposes only. This is not investment advice. Invest at your own risk."})]})]})}function Y(){let[e,t]=(0,r.useState)(""),[s,l]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[o,c]=(0,r.useState)("idle"),[d,m]=(0,r.useState)(""),x=async a=>{a.preventDefault(),c("sending"),m("");try{let a=await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,subject:s,message:n})});if(a.ok)c("success"),t(""),l(""),i("");else{let e=await a.json();m(e.error||"Failed to send feedback"),c("error")}}catch(e){m("Failed to send feedback"),c("error")}};return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8 text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold font-heading mb-2",children:"Send Feedback"}),(0,a.jsx)("p",{className:"text-gray-600",children:"We'd love to hear your thoughts about Plan B Portfolio Manager"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 p-8",children:[(0,a.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Your Email ",(0,a.jsx)("span",{className:"text-gray-400",children:"(optional)"})]}),(0,a.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",placeholder:"you@email.com"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"We'll only use this to respond to your feedback"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Subject ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",placeholder:"e.g., Bug report, Feature request, General feedback",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Message ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("textarea",{value:n,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition resize-none",rows:6,placeholder:"Tell us what you think about Plan B Portfolio Manager. What works well? What could be improved? Any bugs you've encountered?",required:!0}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Be as detailed as possible to help us improve"})]}),(0,a.jsx)("div",{className:"flex gap-4 pt-4",children:(0,a.jsx)("button",{type:"submit",className:"flex-1 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed",disabled:"sending"===o,children:"sending"===o?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Sending..."]}):"Send Feedback"})}),"success"===o&&(0,a.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,a.jsx)("span",{className:"text-green-800 font-medium",children:"Thank you for your feedback!"})]}),(0,a.jsx)("p",{className:"text-green-700 text-sm mt-1",children:"We've received your message and will get back to you soon."})]}),"error"===o&&(0,a.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),(0,a.jsx)("span",{className:"text-red-800 font-medium",children:"Failed to send feedback"})]}),(0,a.jsx)("p",{className:"text-red-700 text-sm mt-1",children:d})]})]}),(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold font-heading mb-3",children:"What kind of feedback are we looking for?"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDC1E Bug Reports"}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"Found something that's not working? Let us know with details about what happened."})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-green-900 mb-2",children:"\uD83D\uDCA1 Feature Requests"}),(0,a.jsx)("p",{className:"text-sm text-green-700",children:"Have ideas for new features? We'd love to hear what would make Plan B better."})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-purple-900 mb-2",children:"\uD83D\uDE09 General Feedback"}),(0,a.jsx)("p",{className:"text-sm text-purple-700",children:"Thoughts on the interface, performance, or overall user experience."})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-yellow-900 mb-2",children:"\uD83D\uDCC8 Investment Tools"}),(0,a.jsx)("p",{className:"text-sm text-yellow-700",children:"Suggestions for new analysis tools, charts, or portfolio management features."})]})]})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[639,857,623,108,347,870,358],()=>t(2318)),_N_E=e.O()}]);